{"ast":null,"code":"import React,{useEffect}from\"react\";import'./App.css';import'./components/css/navbar.css';import{BrowserRouter as Router,Routes,Route}from'react-router-dom';import Navbar from'./components/Navbar';import Home from'./components/Startseite';import About from'./components/about';import Help from'./components/Help';import Room from'./components/Room';import Host from\"./components/Host\";import Watchparty from\"./components/Watchparty\";import{leaveRoom}from\"./components/Controller/RoomController\";import UserCreatrSide from\"./components/UserCreateSide\";import{NotFound}from\"./components/NotFound\";import Chat from\"./components/Chat\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){useEffect(function(){window.addEventListener('beforeunload',alertUser);window.addEventListener('unload',handleTabClosing);return function(){window.removeEventListener('beforeunload',alertUser);window.removeEventListener('unload',handleTabClosing);};});var handleTabClosing=function handleTabClosing(){logOut(sessionStorage.getItem('id'));};var alertUser=function alertUser(event){event.preventDefault();event.returnValue='';// not lösung, nutzer werden sonst nie gelöscht bei verlassen der Seite\nleaveRoom(sessionStorage.getItem('roomname'));logOut(sessionStorage.getItem('id'));};var logOut=function logOut(id){var url='https://gruppe13.toni-barth.com/users/';fetch(url+id,{method:'DELETE',headers:{\"Content-Type\":\"application/json\"}}).then(sessionStorage.clear());};return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/index\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/about\",element:/*#__PURE__*/_jsx(About,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Help\",element:/*#__PURE__*/_jsx(Help,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Room\",element:/*#__PURE__*/_jsx(Room,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Host\",element:/*#__PURE__*/_jsx(Host,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Watchparty/:roomid\",element:/*#__PURE__*/_jsx(Watchparty,{})}),/*#__PURE__*/_jsx(Route,{path:\"/UserCreateSide\",element:/*#__PURE__*/_jsx(UserCreatrSide,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Chat\",element:/*#__PURE__*/_jsx(Chat,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFound,{})})]})]});}export default App;","map":{"version":3,"names":["React","useEffect","BrowserRouter","Router","Routes","Route","Navbar","Home","About","Help","Room","Host","Watchparty","leaveRoom","UserCreatrSide","NotFound","Chat","App","window","addEventListener","alertUser","handleTabClosing","removeEventListener","logOut","sessionStorage","getItem","event","preventDefault","returnValue","id","url","fetch","method","headers","then","clear"],"sources":["C:/Users/Tom/w2g2022-web/src/App.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport './App.css';\r\nimport './components/css/navbar.css'\r\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\r\nimport Navbar from './components/Navbar';\r\nimport Home from './components/Startseite';\r\nimport About from './components/about';\r\nimport Help from './components/Help';\r\nimport Room from './components/Room';\r\nimport Host from \"./components/Host\";\r\nimport Watchparty from \"./components/Watchparty\";\r\nimport { leaveRoom } from \"./components/Controller/RoomController\";\r\nimport UserCreatrSide from \"./components/UserCreateSide\";\r\nimport { NotFound } from \"./components/NotFound\";\r\nimport Chat from \"./components/Chat\";\r\n\r\n\r\nfunction App() {\r\n  useEffect(() => {\r\n    window.addEventListener('beforeunload', alertUser)\r\n    window.addEventListener('unload', handleTabClosing)\r\n    return () => {\r\n      window.removeEventListener('beforeunload', alertUser)\r\n      window.removeEventListener('unload', handleTabClosing)\r\n    }\r\n})\r\nconst handleTabClosing = () => {\r\n  logOut(sessionStorage.getItem('id'))\r\n}\r\nconst alertUser = (event) => {\r\n  event.preventDefault()\r\n  event.returnValue = ''\r\n  // not lösung, nutzer werden sonst nie gelöscht bei verlassen der Seite\r\n  leaveRoom( sessionStorage.getItem('roomname'))\r\n  logOut(sessionStorage.getItem('id'))\r\n}\r\nconst logOut = (id)=>{\r\n  const url = 'https://gruppe13.toni-barth.com/users/'\r\n  fetch(url+ id, {\r\n    method:'DELETE', headers:{\"Content-Type\": \"application/json\"}\r\n  }).then(sessionStorage.clear())\r\n}\r\n  return (\r\n    <Router>\r\n      <Navbar />\r\n      <Routes>\r\n        <Route exact path='/' element={<Home />} />\r\n        <Route path='/index' element={<Home />} />\r\n        <Route path='/about' element={<About />} />\r\n        <Route path='/Help' element={<Help />} />\r\n        <Route path=\"/Room\" element={<Room/>}/>\r\n        <Route path=\"/Host\" element={<Host/>}/>\r\n        <Route path=\"/Watchparty/:roomid\" element={<Watchparty/>}/>\r\n        <Route path=\"/UserCreateSide\" element={<UserCreatrSide/>}/>\r\n        <Route path=\"/Chat\" element={<Chat/>}/>\r\n        <Route path=\"*\" element={<NotFound/> }/>     \r\n      </Routes>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}