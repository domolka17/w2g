{"ast":null,"code":"import _slicedToArray from\"C:/Users/Tom/w2g2022-web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import\"./css/room.css\";import{useNavigate}from\"react-router-dom\";import{createRoom,joinRoom}from\"./Controller/RoomController\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Room=function Room(){var navigate=useNavigate();var handleButton=function handleButton(){// gives button its funktion\nif(sessionStorage.getItem('id')==null){navigate('/UserCreateSide');}else{createRoom();setTimeout(function(){navigate('/Watchparty/'+sessionStorage.getItem('roomname'));},500);}};var handleButton2=function handleButton2(roomname){// gives button its funktion\nif(sessionStorage.getItem('id')==null){window.sessionStorage.setItem(\"redirect\",roomname);navigate('/UserCreateSide');}else{joinRoom(roomname);setTimeout(function(){navigate('/Watchparty/'+roomname);},500);}};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],getData=_useState2[1];var URL='https://gruppe13.toni-barth.com/rooms/';useEffect(function(){var interval=setInterval(function(){fetchData();},3000);return function(){return clearInterval(interval);};},[]);var fetchData=function fetchData(){fetch(URL).then(function(res){return res.json();}).then(function(response){console.log(response.rooms);getData(response.rooms);});};return/*#__PURE__*/_jsx(\"body\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{class:\"room_title_text\",children:/*#__PURE__*/_jsx(\"h1\",{class:\"room_title\",children:\"Treten Sie einer vorhandenen Watchparty bei\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{class:\"room_h3\",children:\"Vorhandene R\\xE4ume\"}),/*#__PURE__*/_jsx(\"p\",{class:\"roomlist\",children:data.map(function(rooms,name){return/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(event){return handleButton2(rooms.name);},className:\"roomlink_button\",children:rooms.name})},name);})})]}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{class:\"room_text\",children:\"Oder vielleicht doch eine eigene Watchparty erstellen?\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"room_buttons_container\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(event){return handleButton();},className:\"room_buttons\",children:\"Einen neuen Raum erstellen\"})})]})});};export default Room;","map":{"version":3,"names":["React","useNavigate","createRoom","joinRoom","useEffect","useState","Room","navigate","handleButton","sessionStorage","getItem","setTimeout","handleButton2","roomname","window","setItem","data","getData","URL","interval","setInterval","fetchData","clearInterval","fetch","then","res","json","response","console","log","rooms","map","name","event"],"sources":["C:/Users/Tom/w2g2022-web/src/components/Room.js"],"sourcesContent":["import React from 'react'\r\nimport \"./css/room.css\";\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { createRoom, joinRoom } from \"./Controller/RoomController\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\n\r\nconst Room = () => {\r\n  const navigate = useNavigate()\r\n  const handleButton = () => {\t\t// gives button its funktion\r\n    if (sessionStorage.getItem('id') == null) {\r\n      navigate('/UserCreateSide')\r\n    }\r\n    else {\r\n      createRoom()\r\n      setTimeout(function () {\r\n        navigate('/Watchparty/'+sessionStorage.getItem('roomname'))\r\n      }, 500)\r\n    }\r\n  }\r\n  const handleButton2 = (roomname) => {        // gives button its funktion\r\n    if (sessionStorage.getItem('id') == null) {\r\n      window.sessionStorage.setItem(\"redirect\", roomname)\r\n      navigate('/UserCreateSide')\r\n    }\r\n    else {\r\n      joinRoom(roomname)\r\n      setTimeout(function () {\r\n        navigate('/Watchparty/'+roomname)\r\n      }, 500)\r\n    }\r\n  }\r\n\r\n  const [data, getData] = useState([])\r\n  const URL = 'https://gruppe13.toni-barth.com/rooms/';\r\n\r\n\r\n  useEffect(() => {\r\n\t\tconst interval = setInterval(() => {\r\n\t\t\tfetchData()\r\n\t\t}, 3000);\r\n\t\treturn () => clearInterval(interval);\r\n\t}, []);\r\n\r\n  const fetchData = () => {\r\n    fetch(URL)\r\n      .then((res) =>\r\n        res.json())\r\n\r\n      .then((response) => {\r\n        console.log(response.rooms);\r\n        getData(response.rooms);\r\n      })\r\n\r\n  }\r\n\r\n\r\n  return (\r\n    <body>\r\n      <div>\r\n        <div class=\"room_title_text\">\r\n          <h1 class=\"room_title\">Treten Sie einer vorhandenen Watchparty bei</h1>\r\n        </div>\r\n        <div >\r\n          <h3 class=\"room_h3\">Vorhandene RÃ¤ume</h3>\r\n          <p class=\"roomlist\">\r\n            {data.map((rooms, name) => (\r\n              <tr key={name}>\r\n                <button onClick={event => handleButton2(rooms.name)} className=\"roomlink_button\">{rooms.name}</button>\r\n              </tr>\r\n            ))}\r\n          </p>\r\n        </div>\r\n        <div>\r\n\r\n        </div>\r\n        <div>\r\n          <p class=\"room_text\">Oder vielleicht doch eine eigene Watchparty erstellen?</p>\r\n        </div>\r\n\r\n        <div class=\"room_buttons_container\">\r\n          <button onClick={event => handleButton()} className=\"room_buttons\">Einen neuen Raum erstellen</button>\r\n        </div>\r\n      </div>\r\n    </body>\r\n  )\r\n}\r\nexport default Room;"],"mappings":"8GAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAO,gBAAP,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,UAAT,CAAqBC,QAArB,KAAqC,6BAArC,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,C,wFAGA,GAAMC,KAAI,CAAG,QAAPA,KAAO,EAAM,CACjB,GAAMC,SAAQ,CAAGN,WAAW,EAA5B,CACA,GAAMO,aAAY,CAAG,QAAfA,aAAe,EAAM,CAAG;AAC5B,GAAIC,cAAc,CAACC,OAAf,CAAuB,IAAvB,GAAgC,IAApC,CAA0C,CACxCH,QAAQ,CAAC,iBAAD,CAAR,CACD,CAFD,IAGK,CACHL,UAAU,GACVS,UAAU,CAAC,UAAY,CACrBJ,QAAQ,CAAC,eAAeE,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAhB,CAAR,CACD,CAFS,CAEP,GAFO,CAAV,CAGD,CACF,CAVD,CAWA,GAAME,cAAa,CAAG,QAAhBA,cAAgB,CAACC,QAAD,CAAc,CAAS;AAC3C,GAAIJ,cAAc,CAACC,OAAf,CAAuB,IAAvB,GAAgC,IAApC,CAA0C,CACxCI,MAAM,CAACL,cAAP,CAAsBM,OAAtB,CAA8B,UAA9B,CAA0CF,QAA1C,EACAN,QAAQ,CAAC,iBAAD,CAAR,CACD,CAHD,IAIK,CACHJ,QAAQ,CAACU,QAAD,CAAR,CACAF,UAAU,CAAC,UAAY,CACrBJ,QAAQ,CAAC,eAAeM,QAAhB,CAAR,CACD,CAFS,CAEP,GAFO,CAAV,CAGD,CACF,CAXD,CAaA,cAAwBR,QAAQ,CAAC,EAAD,CAAhC,wCAAOW,IAAP,eAAaC,OAAb,eACA,GAAMC,IAAG,CAAG,wCAAZ,CAGAd,SAAS,CAAC,UAAM,CAChB,GAAMe,SAAQ,CAAGC,WAAW,CAAC,UAAM,CAClCC,SAAS,GACT,CAF2B,CAEzB,IAFyB,CAA5B,CAGA,MAAO,kBAAMC,cAAa,CAACH,QAAD,CAAnB,EAAP,CACA,CALS,CAKP,EALO,CAAT,CAOA,GAAME,UAAS,CAAG,QAAZA,UAAY,EAAM,CACtBE,KAAK,CAACL,GAAD,CAAL,CACGM,IADH,CACQ,SAACC,GAAD,QACJA,IAAG,CAACC,IAAJ,EADI,EADR,EAIGF,IAJH,CAIQ,SAACG,QAAD,CAAc,CAClBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,KAArB,EACAb,OAAO,CAACU,QAAQ,CAACG,KAAV,CAAP,CACD,CAPH,EASD,CAVD,CAaA,mBACE,mCACE,oCACE,YAAK,KAAK,CAAC,iBAAX,uBACE,WAAI,KAAK,CAAC,YAAV,yDADF,EADF,cAIE,oCACE,WAAI,KAAK,CAAC,SAAV,iCADF,cAEE,UAAG,KAAK,CAAC,UAAT,UACGd,IAAI,CAACe,GAAL,CAAS,SAACD,KAAD,CAAQE,IAAR,qBACR,iCACE,eAAQ,OAAO,CAAE,iBAAAC,KAAK,QAAIrB,cAAa,CAACkB,KAAK,CAACE,IAAP,CAAjB,EAAtB,CAAqD,SAAS,CAAC,iBAA/D,UAAkFF,KAAK,CAACE,IAAxF,EADF,EAASA,IAAT,CADQ,EAAT,CADH,EAFF,GAJF,cAcE,cAdF,cAiBE,kCACE,UAAG,KAAK,CAAC,WAAT,oEADF,EAjBF,cAqBE,YAAK,KAAK,CAAC,wBAAX,uBACE,eAAQ,OAAO,CAAE,iBAAAC,KAAK,QAAIzB,aAAY,EAAhB,EAAtB,CAA0C,SAAS,CAAC,cAApD,wCADF,EArBF,GADF,EADF,CA6BD,CA/ED,CAgFA,cAAeF,KAAf"},"metadata":{},"sourceType":"module"}