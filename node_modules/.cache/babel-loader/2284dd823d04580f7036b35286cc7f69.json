{"ast":null,"code":"import _slicedToArray from\"C:/Users/Tom/w2g2022-web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{createUser}from\"./Controller/UserController\";import\"./css/host.css\";import{useNavigate}from\"react-router-dom\";import{createRoom,joinRoom}from'./Controller/RoomController';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UserCreatrSide=function UserCreatrSide(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),inp=_useState2[0],setInput=_useState2[1];var navigate=useNavigate();var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),check=_useState4[0],setCheck=_useState4[1];var _useState5=useState(sessionStorage.getItem('redirect')),_useState6=_slicedToArray(_useState5,2),redirect=_useState6[0],setRedirect=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),find=_useState8[0],setFind=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),rooms=_useState10[0],setrooms=_useState10[1];useEffect(function(){if(redirect==undefined){setRedirect(sessionStorage.getItem('redirect'));}else{console.log(redirect);getRooms();}},[redirect]);useEffect(function(){console.log(find);setCheck(checker());},[find]);var handleButton=function handleButton(){// gives button its funktion\nif(sessionStorage.getItem('redirect')!=null){sessionStorage.removeItem('redirect');// triggers when room is available\nif(check==true){createUser(inp);setTimeout(function(){joinRoom(redirect);},500);setTimeout(function(){navigate('/Watchparty/'+redirect);},500);}else{navigate('/*');}}else{createUser(inp);setTimeout(function(){createRoom();setTimeout(function(){navigate('/Watchparty/'+sessionStorage.getItem('roomname'));},500);},200);}};var checker=function checker(){if(find==undefined){console.log(false);return false;}else{console.log(true);return true;}};var finder=function finder(){var temp;temp=rooms.find(function(item){return item.name==redirect;});return temp;};var getRooms=function getRooms(){fetch('https://gruppe13.toni-barth.com/rooms/').then(function(res){return res.json();}).then(function(response){console.log(response.rooms);setrooms(response.rooms);}).then(finder());};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"body\",{class:\"home\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{class:\"hosttitle_text\",children:/*#__PURE__*/_jsx(\"h1\",{class:\"hosttitle\",children:\"Erstellen sie einen eigenen Raum f\\xFCr ihre Watchparty!\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"host_text\",children:/*#__PURE__*/_jsx(\"p\",{class:\"host_textbox\",children:\"Bitte geben Sie einen Benutzernamen ein um diese Seite nutzen zu k\\xF6nnen.\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"input\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"eins\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"input_box\",placeholder:\"Benutzernamen eingeben zb.: Floppa\",value:inp,onChange:function onChange(change){return setInput(change.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{class:\"zwei\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(event){return handleButton();},className:\"host_button\",children:\"Best\\xE4tigen \"})})]})]})})});};export default UserCreatrSide;","map":{"version":3,"names":["React","useState","useEffect","createUser","useNavigate","createRoom","joinRoom","UserCreatrSide","inp","setInput","navigate","check","setCheck","sessionStorage","getItem","redirect","setRedirect","find","setFind","rooms","setrooms","undefined","console","log","getRooms","checker","handleButton","removeItem","setTimeout","finder","temp","item","name","fetch","then","res","json","response","change","target","value","event"],"sources":["C:/Users/Tom/w2g2022-web/src/components/UserCreateSide.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport {  createUser } from \"./Controller/UserController\";\r\nimport \"./css/host.css\";\r\nimport {useNavigate} from \"react-router-dom\"\r\nimport { createRoom, joinRoom } from './Controller/RoomController';\r\n\r\nconst UserCreatrSide = () => {\r\n    const [inp, setInput] = useState('')\r\n    const navigate = useNavigate()\r\n    const [check, setCheck]=useState()\r\n    const [redirect, setRedirect]=useState(sessionStorage.getItem('redirect'))\r\n    const [find, setFind]=useState([])\r\n    const [rooms, setrooms]=useState([])\r\n    \r\n\r\n    useEffect(()=>{\r\n       if(redirect==undefined){\r\n        setRedirect(sessionStorage.getItem('redirect'))\r\n       }\r\n       else{\r\n        console.log(redirect)\r\n        getRooms()\r\n       }\r\n    }, [redirect]);\r\n\r\n\r\n    useEffect(()=>{\r\n        console.log(find)\r\n        setCheck(checker())\r\n    },[find])\r\n\r\n    \r\n\r\n\r\n    const  handleButton =  () => {\t\t// gives button its funktion\r\n\r\n        if(sessionStorage.getItem('redirect')!=null){\r\n            sessionStorage.removeItem('redirect');\r\n\r\n            // triggers when room is available\r\n            if(check==true){\r\n                createUser(inp)\r\n                setTimeout(function () {\r\n                    joinRoom(redirect)\r\n                    }, 500)\r\n                \r\n                setTimeout(function () {\r\n                navigate('/Watchparty/'+redirect)\r\n                }, 500)\r\n            }\r\n\r\n            else{\r\n                navigate('/*')\r\n            }\r\n\r\n\r\n           \r\n        }\r\n        else{\r\n            createUser(inp)\r\n            setTimeout(function () {\r\n                createRoom()\r\n                setTimeout(function () {\r\n                navigate('/Watchparty/'+sessionStorage.getItem('roomname'))\r\n                }, 500)\r\n                }, 200)\r\n        }\r\n    }\r\n\r\n    const checker=()=>{\r\n        if(find == undefined)\r\n        {\r\n            console.log(false)\r\n            return false\r\n        }\r\n        else{\r\n            console.log(true)\r\n            return true\r\n        }\r\n    }\r\n\r\n    const finder=()=>{\r\n        let temp \r\n        temp = rooms.find((item)=>{\r\n            return item.name == redirect\r\n            })\r\n            return temp\r\n        }\r\n        \r\n    const getRooms=()=>{\r\n        fetch('https://gruppe13.toni-barth.com/rooms/')\r\n          .then((res) =>\r\n        res.json())\r\n          .then((response) => {\r\n            console.log(response.rooms)\r\n            setrooms(response.rooms)\r\n         }).then(finder())\r\n    }\r\n        \r\n\r\n  return (\r\n    <>\r\n    <body class=\"home\">\r\n        <div>\r\n            <div class=\"hosttitle_text\">\r\n                <h1 class=\"hosttitle\">Erstellen sie einen eigenen Raum für ihre Watchparty!</h1>\r\n            </div>\r\n            <div class=\"host_text\">\r\n                <p class=\"host_textbox\">Bitte geben Sie einen Benutzernamen ein um diese Seite nutzen zu können.</p>\r\n            </div>\r\n            <div class=\"input\">\r\n                <div class=\"eins\">\r\n                <input type=\"text\" class=\"input_box\" placeholder=\"Benutzernamen eingeben zb.: Floppa\" value={inp} onChange={(change) => setInput(change.target.value)}></input>\r\n                </div>\r\n                <div class=\"zwei\">\r\n\t\t\t\t\t\t<button onClick={event => handleButton()} className=\"host_button\">Bestätigen\t</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </body>\r\n</>\r\n  )\r\n}\r\n\r\nexport default UserCreatrSide"],"mappings":"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"},"metadata":{},"sourceType":"module"}